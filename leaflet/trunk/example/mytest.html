<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <script></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 100%;
        }
        /*确定map容器的高度*/
        .map{
            height: 100%;
        }
    </style>
</head>
<body ms-controller='example'>
<div class="map" ms-controller='map' ms-include-src='tpl' data-include-rendered="vmInit">
    <!--<div ms-attr-id="mid" class="mapLeaf"></div>-->
</div>
<script type="text/javascript" src="../av-modules/require.js"></script>
<script type="text/javascript" src="../av-modules/require-helper.js"></script>
<script>
    require(['avalon','bootstrap','mapLeaf'],function(avalon,bootstrap,mapLeaf){
        avalon.ready(function(){
            var ea=avalon.define({
                $id:'example',
                tpl:require.toUrl('mapLeaf')+'.html',
                vmInit:function(){
                    mapLeaf.initMap();

                }
            });
            mapLeaf.init({
                clid:'map',
                url:{src:'data.json'}
            });

            avalon.scan();
        })
    })

//    var popup = L.popup()
//            .setLatLng(latlng)
//            .setContent('<p>Hello world!<br />This is a nice popup.</p>')
//            .openOn(map);


</script>

</body>
</html>